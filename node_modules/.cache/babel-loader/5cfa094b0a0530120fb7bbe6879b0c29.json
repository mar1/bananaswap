{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\marin\\\\Documents\\\\Dev\\\\bananaswap\\\\moonbeam-uniswap\\\\uniswap-interface-moonbeam\\\\src\\\\pages\\\\Earn\\\\index.tsx\";\nimport React, { useCallback, useContext, useEffect, useState } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { JSBI } from 'moonbeamswap';\nimport { Link } from 'react-router-dom';\nimport { StakeTabs } from '../../components/NavigationTabs';\nimport { useTranslation } from 'react-i18next';\nimport { Text } from 'rebass';\nimport { ButtonPrimary } from '../../components/Button';\nimport { AutoColumn } from '../../components/Column';\nimport AppBody from '../AppBody';\nimport CurrencyInputPanel from '../../components/CurrencyInputPanel';\nimport { useDerivedSwapInfo, useSwapActionHandlers, useSwapState } from '../../state/swap/hooks';\nimport { useExpertModeManager, useUserDeadline, useUserSlippageTolerance } from '../../state/user/hooks';\nimport useWrapCallback, { WrapType } from '../../hooks/useWrapCallback';\nimport useENSAddress from '../../hooks/useENSAddress';\nimport useToggledVersion, { Version } from '../../hooks/useToggledVersion';\nimport { ApprovalState, useApproveCallbackFromTrade } from '../../hooks/useApproveCallback';\nimport { useToggleSettingsMenu, useWalletModalToggle } from '../../state/application/hooks';\nimport { maxAmountSpend } from '../../utils/maxAmountSpend';\nimport { useSwapCallback } from '../../hooks/useSwapCallback';\nvar Fields;\n\n(function (Fields) {\n  Fields[Fields[\"TOKEN0\"] = 0] = \"TOKEN0\";\n  Fields[Fields[\"TOKEN1\"] = 1] = \"TOKEN1\";\n})(Fields || (Fields = {}));\n\nexport default function PoolFinder() {\n  var _parsedAmounts$indepe, _parsedAmounts$indepe2, _parsedAmounts$depend, _parsedAmounts$depend2, _parsedAmounts$indepe3, _parsedAmounts$Field$;\n\n  const theme = useContext(ThemeContext); // toggle wallet when disconnected\n\n  const toggleWalletModal = useWalletModalToggle(); // for expert mode\n\n  const toggleSettings = useToggleSettingsMenu();\n  const [isExpertMode] = useExpertModeManager(); // get custom setting values for user\n\n  const [deadline] = useUserDeadline();\n  const [allowedSlippage] = useUserSlippageTolerance();\n  const {\n    t\n  } = useTranslation(); // swap state\n\n  const {\n    independentField,\n    typedValue,\n    recipient\n  } = useSwapState();\n  const {\n    v2Trade,\n    currencyBalances,\n    parsedAmount,\n    currencies,\n    inputError: swapInputError\n  } = useDerivedSwapInfo();\n  const {\n    wrapType,\n    execute: onWrap,\n    inputError: wrapInputError\n  } = useWrapCallback(currencies[Field.INPUT], currencies[Field.OUTPUT], typedValue);\n  const showWrap = wrapType !== WrapType.NOT_APPLICABLE;\n  const {\n    address: recipientAddress\n  } = useENSAddress(recipient);\n  const toggledVersion = useToggledVersion();\n  const trade = showWrap ? undefined : {\n    [Version.v2]: v2Trade\n  }[toggledVersion];\n  const parsedAmounts = showWrap ? {\n    [Field.INPUT]: parsedAmount,\n    [Field.OUTPUT]: parsedAmount\n  } : {\n    [Field.INPUT]: independentField === Field.INPUT ? parsedAmount : trade === null || trade === void 0 ? void 0 : trade.inputAmount,\n    [Field.OUTPUT]: independentField === Field.OUTPUT ? parsedAmount : trade === null || trade === void 0 ? void 0 : trade.outputAmount\n  };\n  const {\n    onSwitchTokens,\n    onCurrencySelection,\n    onUserInput,\n    onChangeRecipient\n  } = useSwapActionHandlers();\n  const isValid = !swapInputError;\n  const dependentField = independentField === Field.INPUT ? Field.OUTPUT : Field.INPUT;\n  const handleTypeInput = useCallback(value => {\n    onUserInput(Field.INPUT, value);\n  }, [onUserInput]);\n  const handleMaxInput = useCallback(() => {\n    maxAmountInput && onUserInput(Field.INPUT, maxAmountInput.toExact());\n  }, [maxAmountInput, onUserInput]);\n  const formattedAmounts = {\n    [independentField]: typedValue,\n    [dependentField]: showWrap ? (_parsedAmounts$indepe = (_parsedAmounts$indepe2 = parsedAmounts[independentField]) === null || _parsedAmounts$indepe2 === void 0 ? void 0 : _parsedAmounts$indepe2.toExact()) !== null && _parsedAmounts$indepe !== void 0 ? _parsedAmounts$indepe : '' : (_parsedAmounts$depend = (_parsedAmounts$depend2 = parsedAmounts[dependentField]) === null || _parsedAmounts$depend2 === void 0 ? void 0 : _parsedAmounts$depend2.toSignificant(6)) !== null && _parsedAmounts$depend !== void 0 ? _parsedAmounts$depend : ''\n  };\n  const route = trade === null || trade === void 0 ? void 0 : trade.route;\n  const userHasSpecifiedInputOutput = Boolean(currencies[Field.INPUT] && currencies[Field.OUTPUT] && ((_parsedAmounts$indepe3 = parsedAmounts[independentField]) === null || _parsedAmounts$indepe3 === void 0 ? void 0 : _parsedAmounts$indepe3.greaterThan(JSBI.BigInt(0))));\n  const noRoute = !route; // check whether the user has approved the router on the input token\n\n  const [approval, approveCallback] = useApproveCallbackFromTrade(trade, allowedSlippage); // check if user has gone through approval process, used to show two step buttons, reset on token change\n\n  const [approvalSubmitted, setApprovalSubmitted] = useState(false); // mark when a user has submitted an approval, reset onTokenSelection for input field\n\n  useEffect(() => {\n    if (approval === ApprovalState.PENDING) {\n      setApprovalSubmitted(true);\n    }\n  }, [approval, approvalSubmitted]);\n  const maxAmountInput = maxAmountSpend(currencyBalances[Field.INPUT]);\n  const atMaxAmountInput = Boolean(maxAmountInput && ((_parsedAmounts$Field$ = parsedAmounts[Field.INPUT]) === null || _parsedAmounts$Field$ === void 0 ? void 0 : _parsedAmounts$Field$.equalTo(maxAmountInput)));\n  const {\n    callback: swapCallback,\n    error: swapCallbackError\n  } = useSwapCallback(trade, allowedSlippage, deadline, recipient);\n  return /*#__PURE__*/React.createElement(AppBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(StakeTabs, {\n    active: 'earn',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(AutoColumn, {\n    gap: \"lg\",\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"http://localhost:3000/bananascoin.png\",\n    Width: \"150px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Text, {\n    textAlign: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }\n  }, \"Stake your LP tokens to get extra $BANANAS rewards\"), /*#__PURE__*/React.createElement(CurrencyInputPanel, {\n    label: independentField === Field.OUTPUT && !showWrap && trade ? 'From (estimated)' : 'From',\n    value: formattedAmounts[Field.INPUT],\n    showMaxButton: !atMaxAmountInput,\n    currency: currencies[Field.INPUT],\n    onUserInput: handleTypeInput,\n    onMax: handleMaxInput,\n    onCurrencySelect: handleInputSelect,\n    otherCurrency: currencies[Field.OUTPUT],\n    id: \"swap-currency-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(ButtonPrimary, {\n    id: \"join-pool-button\",\n    as: Link,\n    style: {\n      padding: 16\n    },\n    to: \"/add/ETH\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Text, {\n    fontWeight: 500,\n    fontSize: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }\n  }, t('addLiquidity')))));\n}","map":{"version":3,"sources":["C:/Users/marin/Documents/Dev/bananaswap/moonbeam-uniswap/uniswap-interface-moonbeam/src/pages/Earn/index.tsx"],"names":["React","useCallback","useContext","useEffect","useState","ThemeContext","JSBI","Link","StakeTabs","useTranslation","Text","ButtonPrimary","AutoColumn","AppBody","CurrencyInputPanel","useDerivedSwapInfo","useSwapActionHandlers","useSwapState","useExpertModeManager","useUserDeadline","useUserSlippageTolerance","useWrapCallback","WrapType","useENSAddress","useToggledVersion","Version","ApprovalState","useApproveCallbackFromTrade","useToggleSettingsMenu","useWalletModalToggle","maxAmountSpend","useSwapCallback","Fields","PoolFinder","theme","toggleWalletModal","toggleSettings","isExpertMode","deadline","allowedSlippage","t","independentField","typedValue","recipient","v2Trade","currencyBalances","parsedAmount","currencies","inputError","swapInputError","wrapType","execute","onWrap","wrapInputError","Field","INPUT","OUTPUT","showWrap","NOT_APPLICABLE","address","recipientAddress","toggledVersion","trade","undefined","v2","parsedAmounts","inputAmount","outputAmount","onSwitchTokens","onCurrencySelection","onUserInput","onChangeRecipient","isValid","dependentField","handleTypeInput","value","handleMaxInput","maxAmountInput","toExact","formattedAmounts","toSignificant","route","userHasSpecifiedInputOutput","Boolean","greaterThan","BigInt","noRoute","approval","approveCallback","approvalSubmitted","setApprovalSubmitted","PENDING","atMaxAmountInput","equalTo","callback","swapCallback","error","swapCallbackError","handleInputSelect","padding"],"mappings":"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","sourcesContent":["import React, { useCallback, useContext, useEffect, useMemo, useState } from 'react'\r\nimport { ThemeContext } from 'styled-components'\r\nimport { CurrencyAmount, JSBI, Token, Trade } from 'moonbeamswap'\r\nimport { Link } from 'react-router-dom'\r\nimport { StakeTabs } from '../../components/NavigationTabs'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport Question from '../../components/QuestionHelper'\r\nimport FullPositionCard from '../../components/PositionCard'\r\nimport { useTokenBalancesWithLoadingIndicator } from '../../state/wallet/hooks'\r\nimport { StyledInternalLink, TYPE } from '../../theme'\r\nimport { Text } from 'rebass'\r\nimport { LightCard } from '../../components/Card'\r\nimport { RowBetween } from '../../components/Row'\r\nimport { ButtonPrimary } from '../../components/Button'\r\nimport { AutoColumn } from '../../components/Column'\r\n\r\nimport { useActiveWeb3React } from '../../hooks'\r\nimport { usePairs } from '../../data/Reserves'\r\nimport { toV2LiquidityToken, useTrackedTokenPairs } from '../../state/user/hooks'\r\nimport AppBody from '../AppBody'\r\nimport { Dots } from '../../components/swap/styleds'\r\n\r\nimport CurrencyInputPanel from '../../components/CurrencyInputPanel'\r\nimport {\r\n  useDefaultsFromURLSearch,\r\n  useDerivedSwapInfo,\r\n  useSwapActionHandlers,\r\n  useSwapState\r\n} from '../../state/swap/hooks'\r\nimport { useExpertModeManager, useUserDeadline, useUserSlippageTolerance } from '../../state/user/hooks'\r\nimport useWrapCallback, { WrapType } from '../../hooks/useWrapCallback'\r\nimport useENSAddress from '../../hooks/useENSAddress'\r\nimport useToggledVersion, { Version } from '../../hooks/useToggledVersion'\r\nimport { ApprovalState, useApproveCallbackFromTrade } from '../../hooks/useApproveCallback'\r\nimport { useToggleSettingsMenu, useWalletModalToggle } from '../../state/application/hooks'\r\nimport { maxAmountSpend } from '../../utils/maxAmountSpend'\r\nimport { useSwapCallback } from '../../hooks/useSwapCallback'\r\n\r\nenum Fields {\r\n  TOKEN0 = 0,\r\n  TOKEN1 = 1\r\n}\r\n\r\nexport default function PoolFinder() {\r\n  const theme = useContext(ThemeContext)\r\n\r\n  // toggle wallet when disconnected\r\n  const toggleWalletModal = useWalletModalToggle()\r\n\r\n  // for expert mode\r\n  const toggleSettings = useToggleSettingsMenu()\r\n  const [isExpertMode] = useExpertModeManager()\r\n\r\n  // get custom setting values for user\r\n  const [deadline] = useUserDeadline()\r\n  const [allowedSlippage] = useUserSlippageTolerance()\r\n  const { t } = useTranslation()\r\n\r\n\r\n  // swap state\r\n  const { independentField, typedValue, recipient } = useSwapState()\r\n  const { v2Trade, currencyBalances, parsedAmount, currencies, inputError: swapInputError } = useDerivedSwapInfo()\r\n  const { wrapType, execute: onWrap, inputError: wrapInputError } = useWrapCallback(\r\n    currencies[Field.INPUT],\r\n    currencies[Field.OUTPUT],\r\n    typedValue\r\n  )\r\n  const showWrap: boolean = wrapType !== WrapType.NOT_APPLICABLE\r\n  const { address: recipientAddress } = useENSAddress(recipient)\r\n  const toggledVersion = useToggledVersion()\r\n  const trade = showWrap\r\n    ? undefined\r\n    : {\r\n        [Version.v2]: v2Trade\r\n      }[toggledVersion]\r\n\r\n  const parsedAmounts = showWrap\r\n    ? {\r\n        [Field.INPUT]: parsedAmount,\r\n        [Field.OUTPUT]: parsedAmount\r\n      }\r\n    : {\r\n        [Field.INPUT]: independentField === Field.INPUT ? parsedAmount : trade?.inputAmount,\r\n        [Field.OUTPUT]: independentField === Field.OUTPUT ? parsedAmount : trade?.outputAmount\r\n      }\r\n\r\n  const { onSwitchTokens, onCurrencySelection, onUserInput, onChangeRecipient } = useSwapActionHandlers()\r\n  const isValid = !swapInputError\r\n  const dependentField: Field = independentField === Field.INPUT ? Field.OUTPUT : Field.INPUT\r\n\r\n  const handleTypeInput = useCallback(\r\n    (value: string) => {\r\n      onUserInput(Field.INPUT, value)\r\n    },\r\n    [onUserInput]\r\n  )\r\n\r\n  const handleMaxInput = useCallback(() => {\r\n    maxAmountInput && onUserInput(Field.INPUT, maxAmountInput.toExact())\r\n  }, [maxAmountInput, onUserInput])\r\n\r\n  const formattedAmounts = {\r\n    [independentField]: typedValue,\r\n    [dependentField]: showWrap\r\n      ? parsedAmounts[independentField]?.toExact() ?? ''\r\n      : parsedAmounts[dependentField]?.toSignificant(6) ?? ''\r\n  }\r\n  const route = trade?.route\r\n  const userHasSpecifiedInputOutput = Boolean(\r\n    currencies[Field.INPUT] && currencies[Field.OUTPUT] && parsedAmounts[independentField]?.greaterThan(JSBI.BigInt(0))\r\n  )\r\n  const noRoute = !route\r\n\r\n  // check whether the user has approved the router on the input token\r\n  const [approval, approveCallback] = useApproveCallbackFromTrade(trade, allowedSlippage)\r\n\r\n  // check if user has gone through approval process, used to show two step buttons, reset on token change\r\n  const [approvalSubmitted, setApprovalSubmitted] = useState<boolean>(false)\r\n\r\n  // mark when a user has submitted an approval, reset onTokenSelection for input field\r\n  useEffect(() => {\r\n    if (approval === ApprovalState.PENDING) {\r\n      setApprovalSubmitted(true)\r\n    }\r\n  }, [approval, approvalSubmitted])\r\n\r\n  const maxAmountInput: CurrencyAmount | undefined = maxAmountSpend(currencyBalances[Field.INPUT])\r\n  const atMaxAmountInput = Boolean(maxAmountInput && parsedAmounts[Field.INPUT]?.equalTo(maxAmountInput))\r\n\r\n  const { callback: swapCallback, error: swapCallbackError } = useSwapCallback(\r\n    trade,\r\n    allowedSlippage,\r\n    deadline,\r\n    recipient\r\n  )\r\n  \r\n  return (\r\n    <AppBody>\r\n      <StakeTabs active={'earn'} />\r\n      <AutoColumn gap=\"lg\" justify=\"center\">\r\n        <img src=\"http://localhost:3000/bananascoin.png\" Width='150px'></img>\r\n      <Text textAlign=\"center\">Stake your LP tokens to get extra $BANANAS rewards</Text>\r\n      <CurrencyInputPanel\r\n              label={independentField === Field.OUTPUT && !showWrap && trade ? 'From (estimated)' : 'From'}\r\n              value={formattedAmounts[Field.INPUT]}\r\n              showMaxButton={!atMaxAmountInput}\r\n              currency={currencies[Field.INPUT]}\r\n              onUserInput={handleTypeInput}\r\n              onMax={handleMaxInput}\r\n              onCurrencySelect={handleInputSelect}\r\n              otherCurrency={currencies[Field.OUTPUT]}\r\n              id=\"swap-currency-input\"\r\n            />\r\n          <ButtonPrimary id=\"join-pool-button\" as={Link} style={{ padding: 16 }} to=\"/add/ETH\">\r\n            <Text fontWeight={500} fontSize={20}>\r\n              {t('addLiquidity')}\r\n            </Text>\r\n          </ButtonPrimary>\r\n          </AutoColumn>\r\n    </AppBody>\r\n\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}