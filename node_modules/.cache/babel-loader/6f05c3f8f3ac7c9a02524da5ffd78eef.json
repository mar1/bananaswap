{"ast":null,"code":"import{namehash}from'ethers/lib/utils';import{useMemo}from'react';import{useSingleCallResult}from'../state/multicall/hooks';import{isAddress}from'../utils';import isZero from'../utils/isZero';import{useENSRegistrarContract,useENSResolverContract}from'./useContract';import useDebounce from'./useDebounce';/**\r\n * Does a reverse lookup for an address to find its ENS name.\r\n * Note this is not the same as looking up an ENS name to find an address.\r\n */export default function useENSName(address){var _resolverAddress$resu,_name$result$,_name$result;var debouncedAddress=useDebounce(address,200);var ensNodeArgument=useMemo(function(){if(!debouncedAddress||!isAddress(debouncedAddress))return[undefined];try{return debouncedAddress?[namehash(\"\".concat(debouncedAddress.toLowerCase().substr(2),\".addr.reverse\"))]:[undefined];}catch(error){return[undefined];}},[debouncedAddress]);var registrarContract=useENSRegistrarContract(false);var resolverAddress=useSingleCallResult(registrarContract,'resolver',ensNodeArgument);var resolverAddressResult=(_resolverAddress$resu=resolverAddress.result)===null||_resolverAddress$resu===void 0?void 0:_resolverAddress$resu[0];var resolverContract=useENSResolverContract(resolverAddressResult&&!isZero(resolverAddressResult)?resolverAddressResult:undefined,false);var name=useSingleCallResult(resolverContract,'name',ensNodeArgument);var changed=debouncedAddress!==address;return{ENSName:changed?null:(_name$result$=(_name$result=name.result)===null||_name$result===void 0?void 0:_name$result[0])!==null&&_name$result$!==void 0?_name$result$:null,loading:changed||resolverAddress.loading||name.loading};}","map":{"version":3,"sources":["C:/Users/marin/Desktop/bananaswap/src/hooks/useENSName.ts"],"names":["namehash","useMemo","useSingleCallResult","isAddress","isZero","useENSRegistrarContract","useENSResolverContract","useDebounce","useENSName","address","debouncedAddress","ensNodeArgument","undefined","toLowerCase","substr","error","registrarContract","resolverAddress","resolverAddressResult","result","resolverContract","name","changed","ENSName","loading"],"mappings":"AAAA,OAASA,QAAT,KAAyB,kBAAzB,CACA,OAASC,OAAT,KAAwB,OAAxB,CACA,OAASC,mBAAT,KAAoC,0BAApC,CACA,OAASC,SAAT,KAA0B,UAA1B,CACA,MAAOC,CAAAA,MAAP,KAAmB,iBAAnB,CACA,OAASC,uBAAT,CAAkCC,sBAAlC,KAAgE,eAAhE,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,CAEA;AACA;AACA;AACA,GACA,cAAe,SAASC,CAAAA,UAAT,CAAoBC,OAApB,CAAoF,sDACjG,GAAMC,CAAAA,gBAAgB,CAAGH,WAAW,CAACE,OAAD,CAAU,GAAV,CAApC,CACA,GAAME,CAAAA,eAAe,CAAGV,OAAO,CAAC,UAAM,CACpC,GAAI,CAACS,gBAAD,EAAqB,CAACP,SAAS,CAACO,gBAAD,CAAnC,CAAuD,MAAO,CAACE,SAAD,CAAP,CACvD,GAAI,CACF,MAAOF,CAAAA,gBAAgB,CAAG,CAACV,QAAQ,WAAIU,gBAAgB,CAACG,WAAjB,GAA+BC,MAA/B,CAAsC,CAAtC,CAAJ,kBAAT,CAAH,CAA4E,CAACF,SAAD,CAAnG,CACD,CAAC,MAAOG,KAAP,CAAc,CACd,MAAO,CAACH,SAAD,CAAP,CACD,CACF,CAP8B,CAO5B,CAACF,gBAAD,CAP4B,CAA/B,CAQA,GAAMM,CAAAA,iBAAiB,CAAGX,uBAAuB,CAAC,KAAD,CAAjD,CACA,GAAMY,CAAAA,eAAe,CAAGf,mBAAmB,CAACc,iBAAD,CAAoB,UAApB,CAAgCL,eAAhC,CAA3C,CACA,GAAMO,CAAAA,qBAAqB,wBAAGD,eAAe,CAACE,MAAnB,gDAAG,sBAAyB,CAAzB,CAA9B,CACA,GAAMC,CAAAA,gBAAgB,CAAGd,sBAAsB,CAC7CY,qBAAqB,EAAI,CAACd,MAAM,CAACc,qBAAD,CAAhC,CAA0DA,qBAA1D,CAAkFN,SADrC,CAE7C,KAF6C,CAA/C,CAIA,GAAMS,CAAAA,IAAI,CAAGnB,mBAAmB,CAACkB,gBAAD,CAAmB,MAAnB,CAA2BT,eAA3B,CAAhC,CAEA,GAAMW,CAAAA,OAAO,CAAGZ,gBAAgB,GAAKD,OAArC,CACA,MAAO,CACLc,OAAO,CAAED,OAAO,CAAG,IAAH,8BAAUD,IAAI,CAACF,MAAf,uCAAU,aAAc,CAAd,CAAV,+CAA8B,IADzC,CAELK,OAAO,CAAEF,OAAO,EAAIL,eAAe,CAACO,OAA3B,EAAsCH,IAAI,CAACG,OAF/C,CAAP,CAID","sourcesContent":["import { namehash } from 'ethers/lib/utils'\r\nimport { useMemo } from 'react'\r\nimport { useSingleCallResult } from '../state/multicall/hooks'\r\nimport { isAddress } from '../utils'\r\nimport isZero from '../utils/isZero'\r\nimport { useENSRegistrarContract, useENSResolverContract } from './useContract'\r\nimport useDebounce from './useDebounce'\r\n\r\n/**\r\n * Does a reverse lookup for an address to find its ENS name.\r\n * Note this is not the same as looking up an ENS name to find an address.\r\n */\r\nexport default function useENSName(address?: string): { ENSName: string | null; loading: boolean } {\r\n  const debouncedAddress = useDebounce(address, 200)\r\n  const ensNodeArgument = useMemo(() => {\r\n    if (!debouncedAddress || !isAddress(debouncedAddress)) return [undefined]\r\n    try {\r\n      return debouncedAddress ? [namehash(`${debouncedAddress.toLowerCase().substr(2)}.addr.reverse`)] : [undefined]\r\n    } catch (error) {\r\n      return [undefined]\r\n    }\r\n  }, [debouncedAddress])\r\n  const registrarContract = useENSRegistrarContract(false)\r\n  const resolverAddress = useSingleCallResult(registrarContract, 'resolver', ensNodeArgument)\r\n  const resolverAddressResult = resolverAddress.result?.[0]\r\n  const resolverContract = useENSResolverContract(\r\n    resolverAddressResult && !isZero(resolverAddressResult) ? resolverAddressResult : undefined,\r\n    false\r\n  )\r\n  const name = useSingleCallResult(resolverContract, 'name', ensNodeArgument)\r\n\r\n  const changed = debouncedAddress !== address\r\n  return {\r\n    ENSName: changed ? null : name.result?.[0] ?? null,\r\n    loading: changed || resolverAddress.loading || name.loading\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}