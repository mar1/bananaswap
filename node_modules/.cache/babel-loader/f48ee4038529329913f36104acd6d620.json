{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\marin\\\\Desktop\\\\bananaswap\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _defineProperty from\"C:\\\\Users\\\\marin\\\\Desktop\\\\bananaswap\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Users\\\\marin\\\\Desktop\\\\bananaswap\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\marin\\\\Desktop\\\\bananaswap\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\marin\\\\Desktop\\\\bananaswap\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\marin\\\\Desktop\\\\bananaswap\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";var _EMPTY_LIST;import{ChainId,Token}from'moonbeamswap';import{useMemo}from'react';import{useSelector}from'react-redux';/**\r\n * Token instances created from token info.\r\n */export var WrappedTokenInfo=/*#__PURE__*/function(_Token){_inherits(WrappedTokenInfo,_Token);var _super=_createSuper(WrappedTokenInfo);function WrappedTokenInfo(tokenInfo,tags){var _this;_classCallCheck(this,WrappedTokenInfo);_this=_super.call(this,tokenInfo.chainId,tokenInfo.address,tokenInfo.decimals,tokenInfo.symbol,tokenInfo.name);_this.tokenInfo=void 0;_this.tags=void 0;_this.tokenInfo=tokenInfo;_this.tags=tags;return _this;}_createClass(WrappedTokenInfo,[{key:\"logoURI\",get:function get(){return this.tokenInfo.logoURI;}}]);return WrappedTokenInfo;}(Token);/**\r\n * An empty result, useful as a default.\r\n */var EMPTY_LIST=(_EMPTY_LIST={},_defineProperty(_EMPTY_LIST,ChainId.MAINNET,{}),_defineProperty(_EMPTY_LIST,ChainId.STANDALONE,{}),_defineProperty(_EMPTY_LIST,ChainId.MOONROCK,{}),_defineProperty(_EMPTY_LIST,ChainId.MOONBASE,{}),_defineProperty(_EMPTY_LIST,ChainId.MOONSHADOW,{}),_EMPTY_LIST);var listCache=typeof WeakMap!=='undefined'?new WeakMap():null;export function listToTokenMap(list){var result=listCache===null||listCache===void 0?void 0:listCache.get(list);if(result)return result;var map=list.tokens.reduce(function(tokenMap,tokenInfo){var _tokenInfo$tags$map$f,_tokenInfo$tags,_tokenInfo$tags$map;var tags=(_tokenInfo$tags$map$f=(_tokenInfo$tags=tokenInfo.tags)===null||_tokenInfo$tags===void 0?void 0:(_tokenInfo$tags$map=_tokenInfo$tags.map(function(tagId){var _list$tags;if(!((_list$tags=list.tags)===null||_list$tags===void 0?void 0:_list$tags[tagId]))return undefined;return _objectSpread(_objectSpread({},list.tags[tagId]),{},{id:tagId});}))===null||_tokenInfo$tags$map===void 0?void 0:_tokenInfo$tags$map.filter(function(x){return Boolean(x);}))!==null&&_tokenInfo$tags$map$f!==void 0?_tokenInfo$tags$map$f:[];var token=new WrappedTokenInfo(tokenInfo,tags);if(tokenMap[token.chainId][token.address]!==undefined)throw Error('Duplicate tokens.');return _objectSpread(_objectSpread({},tokenMap),{},_defineProperty({},token.chainId,_objectSpread(_objectSpread({},tokenMap[token.chainId]),{},_defineProperty({},token.address,token))));},_objectSpread({},EMPTY_LIST));listCache===null||listCache===void 0?void 0:listCache.set(list,map);return map;}export function useTokenList(url){var lists=useSelector(function(state){return state.lists.byUrl;});return useMemo(function(){var _lists$url;if(!url)return EMPTY_LIST;var current=(_lists$url=lists[url])===null||_lists$url===void 0?void 0:_lists$url.current;if(!current)return EMPTY_LIST;try{return listToTokenMap(current);}catch(error){console.error('Could not show token list due to error',error);return EMPTY_LIST;}},[lists,url]);}export function useSelectedListUrl(){return useSelector(function(state){return state.lists.selectedListUrl;});}export function useSelectedTokenList(){return useTokenList(useSelectedListUrl());}export function useSelectedListInfo(){var _list$current,_list$pendingUpdate;var selectedUrl=useSelectedListUrl();var listsByUrl=useSelector(function(state){return state.lists.byUrl;});var list=selectedUrl?listsByUrl[selectedUrl]:undefined;return{current:(_list$current=list===null||list===void 0?void 0:list.current)!==null&&_list$current!==void 0?_list$current:null,pending:(_list$pendingUpdate=list===null||list===void 0?void 0:list.pendingUpdate)!==null&&_list$pendingUpdate!==void 0?_list$pendingUpdate:null,loading:(list===null||list===void 0?void 0:list.loadingRequestId)!==null};}// returns all downloaded current lists\nexport function useAllLists(){var lists=useSelector(function(state){return state.lists.byUrl;});return useMemo(function(){return Object.keys(lists).map(function(url){return lists[url].current;}).filter(function(l){return Boolean(l);});},[lists]);}","map":{"version":3,"sources":["C:/Users/marin/Desktop/bananaswap/src/state/lists/hooks.ts"],"names":["ChainId","Token","useMemo","useSelector","WrappedTokenInfo","tokenInfo","tags","chainId","address","decimals","symbol","name","logoURI","EMPTY_LIST","MAINNET","STANDALONE","MOONROCK","MOONBASE","MOONSHADOW","listCache","WeakMap","listToTokenMap","list","result","get","map","tokens","reduce","tokenMap","tagId","undefined","id","filter","x","Boolean","token","Error","set","useTokenList","url","lists","state","byUrl","current","error","console","useSelectedListUrl","selectedListUrl","useSelectedTokenList","useSelectedListInfo","selectedUrl","listsByUrl","pending","pendingUpdate","loading","loadingRequestId","useAllLists","Object","keys","l"],"mappings":"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","sourcesContent":["import { ChainId, Token } from 'moonbeamswap'\r\nimport { Tags, TokenInfo, TokenList } from '@uniswap/token-lists'\r\nimport { useMemo } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { AppState } from '../index'\r\n\r\ntype TagDetails = Tags[keyof Tags]\r\nexport interface TagInfo extends TagDetails {\r\n  id: string\r\n}\r\n\r\n/**\r\n * Token instances created from token info.\r\n */\r\nexport class WrappedTokenInfo extends Token {\r\n  public readonly tokenInfo: TokenInfo\r\n  public readonly tags: TagInfo[]\r\n  constructor(tokenInfo: TokenInfo, tags: TagInfo[]) {\r\n    super(tokenInfo.chainId, tokenInfo.address, tokenInfo.decimals, tokenInfo.symbol, tokenInfo.name)\r\n    this.tokenInfo = tokenInfo\r\n    this.tags = tags\r\n  }\r\n  public get logoURI(): string | undefined {\r\n    return this.tokenInfo.logoURI\r\n  }\r\n}\r\n\r\nexport type TokenAddressMap = Readonly<{ [chainId in ChainId]: Readonly<{ [tokenAddress: string]: WrappedTokenInfo }> }>\r\n\r\n/**\r\n * An empty result, useful as a default.\r\n */\r\nconst EMPTY_LIST: TokenAddressMap = {\r\n  [ChainId.MAINNET]: {},\r\n  [ChainId.STANDALONE]: {},\r\n  [ChainId.MOONROCK]: {},\r\n  [ChainId.MOONBASE]: {},\r\n  [ChainId.MOONSHADOW]: {}\r\n}\r\n\r\nconst listCache: WeakMap<TokenList, TokenAddressMap> | null =\r\n  typeof WeakMap !== 'undefined' ? new WeakMap<TokenList, TokenAddressMap>() : null\r\n\r\nexport function listToTokenMap(list: TokenList): TokenAddressMap {\r\n  const result = listCache?.get(list)\r\n  if (result) return result\r\n\r\n  const map = list.tokens.reduce<TokenAddressMap>(\r\n    (tokenMap, tokenInfo) => {\r\n      const tags: TagInfo[] =\r\n        tokenInfo.tags\r\n          ?.map(tagId => {\r\n            if (!list.tags?.[tagId]) return undefined\r\n            return { ...list.tags[tagId], id: tagId }\r\n          })\r\n          ?.filter((x): x is TagInfo => Boolean(x)) ?? []\r\n      const token = new WrappedTokenInfo(tokenInfo, tags)\r\n      if (tokenMap[token.chainId][token.address] !== undefined) throw Error('Duplicate tokens.')\r\n      return {\r\n        ...tokenMap,\r\n        [token.chainId]: {\r\n          ...tokenMap[token.chainId],\r\n          [token.address]: token\r\n        }\r\n      }\r\n    },\r\n    { ...EMPTY_LIST }\r\n  )\r\n  listCache?.set(list, map)\r\n  return map\r\n}\r\n\r\nexport function useTokenList(url: string | undefined): TokenAddressMap {\r\n  const lists = useSelector<AppState, AppState['lists']['byUrl']>(state => state.lists.byUrl)\r\n  return useMemo(() => {\r\n    if (!url) return EMPTY_LIST\r\n    const current = lists[url]?.current\r\n    if (!current) return EMPTY_LIST\r\n    try {\r\n      return listToTokenMap(current)\r\n    } catch (error) {\r\n      console.error('Could not show token list due to error', error)\r\n      return EMPTY_LIST\r\n    }\r\n  }, [lists, url])\r\n}\r\n\r\nexport function useSelectedListUrl(): string | undefined {\r\n  return useSelector<AppState, AppState['lists']['selectedListUrl']>(state => state.lists.selectedListUrl)\r\n}\r\n\r\nexport function useSelectedTokenList(): TokenAddressMap {\r\n  return useTokenList(useSelectedListUrl())\r\n}\r\n\r\nexport function useSelectedListInfo(): { current: TokenList | null; pending: TokenList | null; loading: boolean } {\r\n  const selectedUrl = useSelectedListUrl()\r\n  const listsByUrl = useSelector<AppState, AppState['lists']['byUrl']>(state => state.lists.byUrl)\r\n  const list = selectedUrl ? listsByUrl[selectedUrl] : undefined\r\n  return {\r\n    current: list?.current ?? null,\r\n    pending: list?.pendingUpdate ?? null,\r\n    loading: list?.loadingRequestId !== null\r\n  }\r\n}\r\n\r\n// returns all downloaded current lists\r\nexport function useAllLists(): TokenList[] {\r\n  const lists = useSelector<AppState, AppState['lists']['byUrl']>(state => state.lists.byUrl)\r\n\r\n  return useMemo(\r\n    () =>\r\n      Object.keys(lists)\r\n        .map(url => lists[url].current)\r\n        .filter((l): l is TokenList => Boolean(l)),\r\n    [lists]\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}