{"ast":null,"code":"import { nanoid } from '@reduxjs/toolkit';\nimport { ChainId } from 'moonbeamswap';\nimport { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { getNetworkLibrary, NETWORK_CHAIN_ID } from '../connectors';\nimport { fetchTokenList } from '../state/lists/actions';\nimport getTokenList from '../utils/getTokenList';\nimport resolveENSContentHash from '../utils/resolveENSContentHash';\nimport { useActiveWeb3React } from './index';\nexport function useFetchListCallback() {\n  const {\n    chainId,\n    library\n  } = useActiveWeb3React();\n  const dispatch = useDispatch();\n  const ensResolver = useCallback(ensName => {\n    if (!library || chainId !== ChainId.MAINNET) {\n      if (NETWORK_CHAIN_ID === ChainId.MAINNET) {\n        const networkLibrary = getNetworkLibrary();\n\n        if (networkLibrary) {\n          return resolveENSContentHash(ensName, networkLibrary);\n        }\n      }\n\n      throw new Error('Could not construct mainnet ENS resolver');\n    }\n\n    return resolveENSContentHash(ensName, library);\n  }, [chainId, library]);\n  return useCallback(async listUrl => {\n    const requestId = nanoid();\n    dispatch(fetchTokenList.pending({\n      requestId,\n      url: listUrl\n    }));\n    return getTokenList(listUrl, ensResolver).then(tokenList => {\n      dispatch(fetchTokenList.fulfilled({\n        url: listUrl,\n        tokenList,\n        requestId\n      }));\n      return tokenList;\n    }).catch(error => {\n      console.debug(`Failed to get list at url ${listUrl}`, error);\n      dispatch(fetchTokenList.rejected({\n        url: listUrl,\n        requestId,\n        errorMessage: error.message\n      }));\n      throw error;\n    });\n  }, [dispatch, ensResolver]);\n}","map":{"version":3,"sources":["C:/Users/marin/Documents/Dev/bananaswap/moonbeam-uniswap/uniswap-interface-moonbeam/src/hooks/useFetchListCallback.ts"],"names":["nanoid","ChainId","useCallback","useDispatch","getNetworkLibrary","NETWORK_CHAIN_ID","fetchTokenList","getTokenList","resolveENSContentHash","useActiveWeb3React","useFetchListCallback","chainId","library","dispatch","ensResolver","ensName","MAINNET","networkLibrary","Error","listUrl","requestId","pending","url","then","tokenList","fulfilled","catch","error","console","debug","rejected","errorMessage","message"],"mappings":"AAAA,SAASA,MAAT,QAAuB,kBAAvB;AACA,SAASC,OAAT,QAAwB,cAAxB;AAEA,SAASC,WAAT,QAA4B,OAA5B;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,iBAAT,EAA4BC,gBAA5B,QAAoD,eAApD;AAEA,SAASC,cAAT,QAA+B,wBAA/B;AACA,OAAOC,YAAP,MAAyB,uBAAzB;AACA,OAAOC,qBAAP,MAAkC,gCAAlC;AACA,SAASC,kBAAT,QAAmC,SAAnC;AAEA,OAAO,SAASC,oBAAT,GAAyE;AAC9E,QAAM;AAAEC,IAAAA,OAAF;AAAWC,IAAAA;AAAX,MAAuBH,kBAAkB,EAA/C;AACA,QAAMI,QAAQ,GAAGV,WAAW,EAA5B;AAEA,QAAMW,WAAW,GAAGZ,WAAW,CAC5Ba,OAAD,IAAqB;AACnB,QAAI,CAACH,OAAD,IAAYD,OAAO,KAAKV,OAAO,CAACe,OAApC,EAA6C;AAC3C,UAAIX,gBAAgB,KAAKJ,OAAO,CAACe,OAAjC,EAA0C;AACxC,cAAMC,cAAc,GAAGb,iBAAiB,EAAxC;;AACA,YAAIa,cAAJ,EAAoB;AAClB,iBAAOT,qBAAqB,CAACO,OAAD,EAAUE,cAAV,CAA5B;AACD;AACF;;AACD,YAAM,IAAIC,KAAJ,CAAU,0CAAV,CAAN;AACD;;AACD,WAAOV,qBAAqB,CAACO,OAAD,EAAUH,OAAV,CAA5B;AACD,GAZ4B,EAa7B,CAACD,OAAD,EAAUC,OAAV,CAb6B,CAA/B;AAgBA,SAAOV,WAAW,CAChB,MAAOiB,OAAP,IAA2B;AACzB,UAAMC,SAAS,GAAGpB,MAAM,EAAxB;AACAa,IAAAA,QAAQ,CAACP,cAAc,CAACe,OAAf,CAAuB;AAAED,MAAAA,SAAF;AAAaE,MAAAA,GAAG,EAAEH;AAAlB,KAAvB,CAAD,CAAR;AACA,WAAOZ,YAAY,CAACY,OAAD,EAAUL,WAAV,CAAZ,CACJS,IADI,CACCC,SAAS,IAAI;AACjBX,MAAAA,QAAQ,CAACP,cAAc,CAACmB,SAAf,CAAyB;AAAEH,QAAAA,GAAG,EAAEH,OAAP;AAAgBK,QAAAA,SAAhB;AAA2BJ,QAAAA;AAA3B,OAAzB,CAAD,CAAR;AACA,aAAOI,SAAP;AACD,KAJI,EAKJE,KALI,CAKEC,KAAK,IAAI;AACdC,MAAAA,OAAO,CAACC,KAAR,CAAe,6BAA4BV,OAAQ,EAAnD,EAAsDQ,KAAtD;AACAd,MAAAA,QAAQ,CAACP,cAAc,CAACwB,QAAf,CAAwB;AAAER,QAAAA,GAAG,EAAEH,OAAP;AAAgBC,QAAAA,SAAhB;AAA2BW,QAAAA,YAAY,EAAEJ,KAAK,CAACK;AAA/C,OAAxB,CAAD,CAAR;AACA,YAAML,KAAN;AACD,KATI,CAAP;AAUD,GAde,EAehB,CAACd,QAAD,EAAWC,WAAX,CAfgB,CAAlB;AAiBD","sourcesContent":["import { nanoid } from '@reduxjs/toolkit'\r\nimport { ChainId } from 'moonbeamswap'\r\nimport { TokenList } from '@uniswap/token-lists'\r\nimport { useCallback } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { getNetworkLibrary, NETWORK_CHAIN_ID } from '../connectors'\r\nimport { AppDispatch } from '../state'\r\nimport { fetchTokenList } from '../state/lists/actions'\r\nimport getTokenList from '../utils/getTokenList'\r\nimport resolveENSContentHash from '../utils/resolveENSContentHash'\r\nimport { useActiveWeb3React } from './index'\r\n\r\nexport function useFetchListCallback(): (listUrl: string) => Promise<TokenList> {\r\n  const { chainId, library } = useActiveWeb3React()\r\n  const dispatch = useDispatch<AppDispatch>()\r\n\r\n  const ensResolver = useCallback(\r\n    (ensName: string) => {\r\n      if (!library || chainId !== ChainId.MAINNET) {\r\n        if (NETWORK_CHAIN_ID === ChainId.MAINNET) {\r\n          const networkLibrary = getNetworkLibrary()\r\n          if (networkLibrary) {\r\n            return resolveENSContentHash(ensName, networkLibrary)\r\n          }\r\n        }\r\n        throw new Error('Could not construct mainnet ENS resolver')\r\n      }\r\n      return resolveENSContentHash(ensName, library)\r\n    },\r\n    [chainId, library]\r\n  )\r\n\r\n  return useCallback(\r\n    async (listUrl: string) => {\r\n      const requestId = nanoid()\r\n      dispatch(fetchTokenList.pending({ requestId, url: listUrl }))\r\n      return getTokenList(listUrl, ensResolver)\r\n        .then(tokenList => {\r\n          dispatch(fetchTokenList.fulfilled({ url: listUrl, tokenList, requestId }))\r\n          return tokenList\r\n        })\r\n        .catch(error => {\r\n          console.debug(`Failed to get list at url ${listUrl}`, error)\r\n          dispatch(fetchTokenList.rejected({ url: listUrl, requestId, errorMessage: error.message }))\r\n          throw error\r\n        })\r\n    },\r\n    [dispatch, ensResolver]\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}